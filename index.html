<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bitcoin OP_RETURN Writer</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      height: 100vh;
      background: radial-gradient(circle at center, #000000 60%, #0a0a0a 100%);
      color: #ffb84d;
      font-family: 'Orbitron', sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    /* Contenitore principale */
    .container {
      border: 2px solid #ffb84d;
      border-radius: 15px;
      padding: 40px;
      text-align: center;
      width: 420px;
      box-shadow: 0 0 25px #ffb84d55;
      background: rgba(0, 0, 0, 0.8);
      position: relative;
    }

    /* Pulsante How It Works */
    .info-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 0.7rem;
      border: 1px solid #ffb84d;
      background: rgba(0, 0, 0, 0.5);
      color: #ffb84d;
      padding: 4px 8px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .info-btn:hover {
      background: #ffb84d;
      color: #000;
    }

    h1 {
      color: #ffb84d;
      text-shadow: 0 0 10px #ffb84d;
      margin-bottom: 10px;
    }

    p.subtitle {
      color: #b3b3b3;
      font-size: 0.9rem;
      margin-bottom: 25px;
    }

    textarea {
      width: 85%;
      height: 55px;
      border: 1px solid #ffb84d;
      border-radius: 10px;
      background: linear-gradient(180deg, #002200 0%, #003300 100%);
      color: #ffffff;
      padding: 10px;
      font-family: 'Inter', sans-serif;
      font-size: 1.15rem;
      font-weight: 500;
      text-align: center;
      outline: none;
      resize: none;
      transition: background 0.3s ease, box-shadow 0.3s ease, transform 0.1s ease;
    }

    textarea:focus {
      transform: scale(1.01);
      box-shadow: 0 0 12px #00ff0066;
    }

    .char-count {
      color: #ffb84d;
      margin-top: 6px;
      font-size: 0.85rem;
      font-family: 'Orbitron', sans-serif;
    }

    button {
      display: block;
      width: 90%;
      margin: 10px auto;
      padding: 10px;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.9rem;
      color: #ffb84d;
      background: transparent;
      border: 2px solid #ffb84d;
      border-radius: 10px;
      text-shadow: 0 0 8px #ffb84d;
      cursor: pointer;
      transition: background 0.3s ease, box-shadow 0.3s ease, color 0.3s ease;
    }

    button:hover:enabled {
      background: #ffb84d;
      color: #000;
      box-shadow: 0 0 15px #ffb84d;
    }

    button:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .hex-container {
      width: 90%;
      margin: 25px auto 0 auto;
      text-align: center;
      color: #ffb84d;
      font-family: 'Orbitron', sans-serif;
      overflow-wrap: break-word;
      word-break: break-all;
      position: relative;
    }

    .hex-label {
      color: #ffb84d;
      font-size: 0.9rem;
      margin-bottom: 6px;
      text-shadow: 0 0 6px #ffb84d;
    }

    .hex-box {
      display: inline-block;
      width: auto;
      min-width: 60%;
      max-width: 95%;
      background: rgba(255, 184, 77, 0.08);
      border: 1px solid #ffb84d;
      border-radius: 8px;
      padding: 10px 15px;
      font-size: 0.9rem;
      color: #ffb84d;
      overflow-wrap: break-word;
      word-break: break-all;
      text-align: left;
      box-shadow: 0 0 10px #ffb84d44;
      max-height: 200px;
      overflow-y: auto;
    }

    /* Popup */
    .modal {
      display: none;
      position: fixed;
      z-index: 10;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: #0a0a0a;
      border: 2px solid #ffb84d;
      border-radius: 12px;
      padding: 20px 30px;
      width: 400px;
      color: #ffb84d;
      text-align: left;
      font-family: 'Inter', sans-serif;
      box-shadow: 0 0 20px #ffb84d55;
    }
    .close-btn {
      float: right;
      font-size: 1.2rem;
      cursor: pointer;
      color: #ffb84d;
    }
    .close-btn:hover {
      color: #fff;
    }

    .redirect-msg {
      margin-top: 15px;
      font-size: 0.9rem;
      color: #00ff99;
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <button class="info-btn" id="infoBtn">How It Works</button>
    <h1>Bitcoin OP_RETURN Writer</h1>
    <p class="subtitle">Store your message forever on the Bitcoin blockchain</p>

    <textarea id="messageInput" maxlength="100" placeholder="Enter up to 37 characters..."></textarea>
    <p class="char-count" id="charCount">0/37</p>

    <button id="writeToday" disabled>WRITE TODAY</button>
    <button id="writeFuture" disabled>WRITE IN THE FUTURE</button>

    <p class="redirect-msg" id="redirectMsg">üîÅ Redirecting to secure Stripe checkout...</p>

    <div class="hex-container">
      <p class="hex-label">‚ú¥ HEX Preview:</p>
      <div class="hex-box" id="hexOutput">...</div>
    </div>
  </div>

  <!-- Modal -->
  <div id="infoModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" id="closeModal">&times;</span>
      <h3>üü† WRITE TODAY</h3>
      <p>
        When you select this option, your message will be written on the blockchain within the same day of your request.
        Our team will receive an automated email containing your message and transaction details.
        Once the inscription is completed, you‚Äôll receive a confirmation email containing the Transaction ID and a direct blockchain.com link where your message can be verified publicly ‚Äî permanently recorded forever.
      </p>
      <hr style="border: 1px solid #ffb84d33; margin: 10px 0;">
      <h3>üü¢ WRITE IN THE FUTURE</h3>
      <p>
        This option lets you schedule your inscription for a future date. After payment,
        on that day, we‚Äôll write your message on the Bitcoin blockchain and send you a confirmation email containing the Transaction ID and blockchain.com link showing your message‚Äôs permanent record.
      </p>
    </div>
  </div>

  <script>
    const input = document.getElementById("messageInput");
    const count = document.getElementById("charCount");
    const hexBox = document.getElementById("hexOutput");
    const writeToday = document.getElementById("writeToday");
    const writeFuture = document.getElementById("writeFuture");
    const redirectMsg = document.getElementById("redirectMsg");

    const infoBtn = document.getElementById("infoBtn");
    const modal = document.getElementById("infoModal");
    const closeModal = document.getElementById("closeModal");

    infoBtn.onclick = () => modal.style.display = "flex";
    closeModal.onclick = () => modal.style.display = "none";
    window.onclick = (e) => { if (e.target === modal) modal.style.display = "none"; };

    input.addEventListener("input", () => {
      const text = input.value;
      const len = [...text].length;
      count.textContent = `${len}/37`;

      // Conversione testo ‚Üí HEX
      let hex = "";
      for (let i = 0; i < text.length; i++) {
        hex += text.charCodeAt(i).toString(16);
      }
      hexBox.textContent = hex || "...";

      // Cambia colore e abilita/disabilita pulsanti
      if (len <= 37 && len > 0) {
        input.style.background = "linear-gradient(180deg, #004400 0%, #007700 100%)";
        writeToday.disabled = false;
        writeFuture.disabled = false;
      } else {
        input.style.background = "linear-gradient(180deg, #440000 0%, #770000 100%)";
        writeToday.disabled = true;
        writeFuture.disabled = true;
      }
    });

    // Redirect URLs ‚Äî puoi aggiornare qui in futuro
    const linkToday = "https://buy.stripe.com/28EcN6ff70lK3lI8jQcwg00";
    const linkFuture = "https://buy.stripe.com/9B65kEc2V3xWcWi0Rocwg01";

    writeToday.addEventListener("click", () => {
      redirectMsg.style.display = "block";
      setTimeout(() => window.open(linkToday, "_blank"), 800);
    });

    writeFuture.addEventListener("click", () => {
      redirectMsg.style.display = "block";
      setTimeout(() => window.open(linkFuture, "_blank"), 800);
    });
  </script>
</body>
</html>
